{% extends "base.html.twig" %}
{% block title %}Home
{% endblock %}
{% block stylesheets %}

	<link rel="stylesheet" href="{{asset('assets/css/bootstrap-slider.min.css')}}">
	<link rel="stylesheet" href="{{asset('assets/css/bootstrap-datepicker.css')}}">

{% endblock %}

{% block body %}
	{% for message in app.flashes('success') %}
		<div class="alert alert-info alert-dismissible fade show" role="alert">
			{{ message }}
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
	{% endfor %}
	<div class"slidshow-home">
		{% include "ui/slidshow.html.twig"  %}
		{% include "ui/horizontal_form_search.html.twig" with { minPrice : minPrice,  maxPrice : maxPrice,} %}
												
	</div>

	<div class="container ">
		{% include "ui/list_ads.html.twig" with { listAds: listAdsPaginator ,'titleOfList':'Most Recent Ads'}%}
			                                    
					
	   
	</div>


{% endblock body %}

{% block javascripts %}
	<script src="{{asset('assets/js/bootstrap-datepicker.min.js')}}"></script>
	<script src="{{asset('assets/js/bootstrap-slider.min.js')}}"></script>
	<script src="{{asset('assets/js/purl.js')}}"></script>


	<script>
$(document).ready(function() {
	let styleView ;
	$('#Check-in, #Check-out').datepicker({format: 'dd/mm/yyyy', locale: 'fr'});
    $("#ex2").slider({});

    updateListeView()

   $('.page-link').focus(function() {
     let url = $(this).attr('href') ;
	 let  queryParams    = $.url(url).param();
	 queryParams.view = styleView;
	 
	 let newUrl = "?" + $.param(queryParams);
   	 $(this).attr('href' , newUrl ) ;


   })


	
  $('.list-view').on('click' , function() {
     	mofifateView(false);

  });


    $('.grid-view').on('click' , function() {
           mofifateView(true);
  });



   function updateListeView() {
       
	    let currentUrl = window.location.href; 
	    let view  =  $.url(currentUrl).param('view');
	
		if(view === 'list') {
          
	       mofifateView(false) ;

		}else {
		   mofifateView(true) ;
 	}

    }

   function mofifateView (listOrGrid) {
     let style ;

	if(listOrGrid){
      style = 'col-lg-4 col-md-6 mb-2-6 mb-3 card-a' ;
	  styleView = 'grid';
	 
	}else {

		 style = 'col-lg-12 col-md-12 mb-2-6 mb-3 card-a';
		 styleView = 'list';
	}

    $('.list-card-ads .card-a').removeClass().addClass(style); 


   }


$('.list_ads').on('click', "a.sortable" , function(e){
	console.log($(this).attr('href'));
$.ajax({
    type: "GET",
    url: $(this).attr('href'),
    })
    .done(function( msg ) {
		console.log(msg)
        //$('body').html(msg);
    });
             e.preventDefault();
});










  
});

	</script>
{% endblock %}
